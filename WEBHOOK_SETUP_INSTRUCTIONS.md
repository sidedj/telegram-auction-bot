# Инструкция по настройке webhook для автоматического начисления

## Проблема
Автоматическое начисление публикаций не работает, потому что webhook настроен с неправильным URL в ЮMoney.

**Текущий URL в ЮMoney**: `https://telegabot-production-3c68.up.rail` ❌
**Правильный URL**: `https://telegabot-production-3c68.up.railway.app/yoomoney` ✅

## Решение

### 1. Исправление webhook в ЮMoney

1. **Войдите в ЮMoney**:
   - Откройте [yoomoney.ru](https://yoomoney.ru)
   - Войдите в свой аккаунт

2. **Перейдите в настройки**:
   - Нажмите на свой аватар в правом верхнем углу
   - Выберите "Настройки"

3. **Исправьте HTTP-уведомления**:
   - В левом меню выберите "HTTP-уведомления"
   - Нажмите "Изменить" или "Настроить"

4. **Заполните данные**:
   - **URL для уведомлений**: `https://telegabot-production-3c68.up.railway.app/yoomoney` ⚠️ **ВАЖНО: добавьте `/yoomoney` в конец URL!**
   - **Секрет для проверки подлинности**: `SaTKEuJWPVXJI/JFpXDCHZ4q`
   - **Типы уведомлений**: выберите "Входящие переводы"

5. **Протестируйте подключение**:
   - Нажмите "Протестировать"
   - Должно появиться сообщение об успешной настройке

6. **Сохраните настройки**:
   - Нажмите "Готово"

### 2. Проверка работы

После настройки webhook'а:

1. **Попробуйте пополнить баланс** через бота
2. **Проверьте логи** на сервере Railway
3. **Убедитесь**, что баланс обновился автоматически

### 3. Диагностика

Если webhook не работает:

1. **Проверьте URL**: должен быть `https://telegabot-production-3c68.up.railway.app/yoomoney`
2. **Проверьте секрет**: должен быть `SaTKEuJWPVXJI/JFpXDCHZ4q`
3. **Проверьте логи** в Railway для диагностики ошибок

### 4. Тестирование

Для тестирования webhook'а локально используйте:
```bash
python test_webhook.py
```

## Важно

- Webhook работает только на сервере Railway
- Локально webhook не обрабатывается
- После настройки webhook'а в ЮMoney автоматическое начисление должно заработать
