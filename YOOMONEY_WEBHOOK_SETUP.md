# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ÆMoney

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

1. **Webhook —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Railway**: `https://web-production-fa7dc.up.railway.app`
2. **Endpoint –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**: `https://web-production-fa7dc.up.railway.app/yoomoney`
3. **Health check**: `https://web-production-fa7dc.up.railway.app/health`
4. **–°–µ–∫—Ä–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏**: `SaTKEuJWPVXJI/JFpXDCHZ4q`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –ø–∞–Ω–µ–ª–∏ –ÆMoney

### –®–∞–≥ 1: –í–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å –ÆMoney
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://yoomoney.ru/
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
1. **URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**: `https://web-production-fa7dc.up.railway.app/yoomoney`
2. **–°–µ–∫—Ä–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏**: `SaTKEuJWPVXJI/JFpXDCHZ4q`
3. **–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: ‚úÖ (–≥–∞–ª–æ—á–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å" —Ä—è–¥–æ–º —Å URL
2. –î–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç "ok" (—Å—Ç–∞—Ç—É—Å 200)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç
```bash
python test_yoomoney_webhook.py
```

### –†—É—á–Ω–æ–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ curl
```bash
curl -X POST https://web-production-fa7dc.up.railway.app/yoomoney \
  -d "notification_type=p2p-incoming" \
  -d "notification_secret=SaTKEuJWPVXJI/JFpXDCHZ4q" \
  -d "label=user_7647551803" \
  -d "amount=50.00" \
  -d "unaccepted=false"
```

## üìã –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ÆMoney –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å—ã —Å –¥–∞–Ω–Ω—ã–º–∏:
- `notification_type`: —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (p2p-incoming)
- `notification_secret`: —Å–µ–∫—Ä–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- `label`: –º–µ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞ (—Ñ–æ—Ä–º–∞—Ç: user_123456)
- `amount`: —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞
- `unaccepted`: —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ (false = –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞)
- `operation_id`: ID –æ–ø–µ—Ä–∞—Ü–∏–∏
- `datetime`: –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏

## üîÑ –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–∞**: –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å `YOOMONEY_SECRET`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞**: `unaccepted` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `false`
3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –ò–∑ `label` (—Ñ–æ—Ä–º–∞—Ç: `user_123456`)
4. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–π**:
   - 48-52‚ÇΩ ‚Üí 1 –ø—É–±–ª–∏–∫–∞—Ü–∏—è
   - 195-205‚ÇΩ ‚Üí 5 –ø—É–±–ª–∏–∫–∞—Ü–∏–π
   - 340-360‚ÇΩ ‚Üí 10 –ø—É–±–ª–∏–∫–∞—Ü–∏–π
   - 590-610‚ÇΩ ‚Üí 20 –ø—É–±–ª–∏–∫–∞—Ü–∏–π
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
6. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞ Railway: https://railway.com/project/b4654da0-004c-40bb-9cea-9eecaf719295
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ÆMoney
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—É–º–º–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Å—É–º–º –≤ –∫–æ–¥–µ
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫–æ–º–∏—Å—Å–∏—é –ÆMoney (–æ–∫–æ–ª–æ 2-3%)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ webhook –≤—Ä—É—á–Ω—É—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø–∞–Ω–µ–ª–∏ –ÆMoney
